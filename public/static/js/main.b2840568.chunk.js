(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,n){e.exports=n(92)},52:function(e,t,n){},86:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=n(7),u=n(8),s=n(10),l=n(9),p=n(11),f=(n(52),n(38)),d=n(15),h=n(14),m=n.n(h),y=n(21),b=n(69),O="AIzaSyBkh3wmLBwxvC1DfAepsbRn9heVgGV9ofs",g=(n(86),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).loadMoreYoutubeData=function(){if(window.innerHeight+window.pageYOffset+500>=Math.max(document.body.offsetHeight,document.body.scrollHeight)){if(n.props.youtube.fetchingData)return;n.props.fetchYoutubeData(!0);var e=n.props.youtube.uploadsPlaylistId;void 0!==e&&n.props.getYoutubeContent(e,n.props.youtube.nextPageToken)}},n.state={videoIds:""},n.props.getYoutubeUploadsPlaylistId(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"videoOrThumbnail",value:function(e){var t=this,n=this.props.youtube.content,a=n[e].snippet.resourceId.videoId;return void 0===n[e].clicked?r.a.createElement("div",{"data-id":a,onClick:function(){return t.props.playYoutubeVideo(e)}},r.a.createElement("img",{src:n[e].snippet.thumbnails.high.url,alt:""}),r.a.createElement("div",{className:"play"})):r.a.createElement(f.a,{videoId:a,opts:{playerVars:{autoplay:1,origin:window.location.href}}})}},{key:"content",value:function(){var e=this.props.youtube.content;if(e.length){for(var t=[],n=0;n<e.length;n++){var a=new Date(e[n].snippet.publishedAt).toLocaleString("en-GB",{timeZone:"UTC"});t[n]=r.a.createElement("div",{key:n},r.a.createElement("p",{className:"ellipsis"},e[n].snippet.title),r.a.createElement("div",{className:"video-player"},this.videoOrThumbnail(n)),r.a.createElement("p",null,a),r.a.createElement("br",null))}return t}}},{key:"render",value:function(){return null===this.props.youtube.uploadsPlaylistId||this.props.youtube.content.length||this.props.getYoutubeContent(this.props.youtube.uploadsPlaylistId),window.addEventListener("scroll",this.loadMoreYoutubeData),r.a.createElement("div",{className:"youtube"},this.content())}}]),t}(r.a.Component)),v=Object(d.b)((function(e){return{youtube:e.youtube}}),{getYoutubeUploadsPlaylistId:function(e){return function(){var e=Object(y.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("https://www.googleapis.com/youtube/v3/channels",{params:{part:"snippet,contentDetails",forUsername:"millchannel",key:O}}).then((function(e){t({type:"GET_YOUTUBE_UPLOADS_PLAYLIST_ID",payload:e.data.items[0].contentDetails.relatedPlaylists.uploads})})).catch((function(e){console.log(e)})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getYoutubeContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(y.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.get("https://www.googleapis.com/youtube/v3/playlistItems",{params:{part:"snippet",playlistId:e,key:O,pageToken:t}}).then((function(e){a({type:"GET_YOUTUBE_CONTENT",payload:{data:e.data,fetchingData:!1}})})).catch((function(e){console.log(e)})).finally((function(){}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fetchYoutubeData:function(e){return{type:"FETCHING_YOUTUBE_DATA",payload:e}},playYoutubeVideo:function(e){return{type:"PLAY_YOUTUBE_VIDEO",payload:e}}})(g),E=n(42),j=(n(89),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).loadMoreVimeoData=function(){if(null!==n.props.vimeo.next&&window.innerHeight+window.pageYOffset+500>=Math.max(document.body.offsetHeight,document.body.scrollHeight)){if(n.props.vimeo.fetchingData)return;n.props.fetchVimeoData(!0),n.props.getVimeoContent(n.props.vimeo.next)}},n.state={videoIds:""},n.props.getVimeoContent(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"videoOrThumbnail",value:function(e){var t=this,n=this.props.vimeo.content;return void 0===n[e].clicked?r.a.createElement("img",{onClick:function(){return t.props.playVimeoVideo(e)},src:n[e].pictures.sizes[3].link_with_play_button,alt:""}):r.a.createElement(E.a,{video:n[e].link,autoplay:!0})}},{key:"content",value:function(){var e=this.props.vimeo.content;if(e.length){for(var t=[],n=0;n<e.length;n++){var a=new Date(e[n].release_time).toLocaleString("en-GB",{timeZone:"UTC"});t[n]=r.a.createElement("div",{key:n},r.a.createElement("p",{className:"ellipsis"},e[n].name),r.a.createElement("div",{className:"video-player"},this.videoOrThumbnail(n)),r.a.createElement("p",null,a),r.a.createElement("br",null))}return t}}},{key:"render",value:function(){return window.addEventListener("scroll",this.loadMoreVimeoData),r.a.createElement("div",{className:"vimeo"},this.content())}}]),t}(r.a.Component)),w=Object(d.b)((function(e){return{vimeo:e.vimeo}}),{getVimeoContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/users/millchannel/videos?page=1&per_page=5";return function(){var t=Object(y.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get("https://api.vimeo.com"+e,{headers:{Authorization:"bearer df1439e70c4a7401f9a1353043b7a57d"}}).then((function(e){n({type:"GET_VIMEO_CONTENT",payload:{data:e.data,fetchingData:!1}})})).catch((function(e){console.log(e)})).finally((function(){}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchVimeoData:function(e){return{type:"FETCHING_VIMEO_DATA",payload:e}},playVimeoVideo:function(e){return{type:"PLAY_VIMEO_VIDEO",payload:e}}})(j),_=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"instagram"},"instagram")}}]),t}(r.a.Component),D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={input:""},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"updateInput",value:function(e){this.setState({input:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement("input",{className:"search",type:"text",placeholder:"Search",onChange:function(t){return e.updateInput(t.target.value)}}),r.a.createElement(v,{search:this.state.input}),r.a.createElement(w,{search:this.state.input}),r.a.createElement(_,{search:this.state.input}))}}]),t}(r.a.Component),T=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){console.log(this.props);var e="https://localhost:8000/";if(null===this.props.instagram.authData.token){var t=new URLSearchParams(this.props.qs).get("code");if(null===t){var n="https://api.instagram.com/oauth/authorize?app_id=566407840787639&redirect_uri="+encodeURIComponent(e)+"&scope=user_profile,user_media&response_type=code";return window.location=n,null}return this.props.setInstagramAuthData("566407840787639","30f34771ff0f7a16b9390eac9a19436f",e,t),null}return r.a.createElement(D,null)}}]),t}(r.a.Component),k=Object(d.b)((function(e){return{instagram:e.instagram}}),{setInstagramAuthData:function(e,t,n,a){return function(r){var o=new FormData;o.set("app_id",e),o.set("app_secret",t),o.set("grant_type","authorization_code"),o.set("redirect_uri",n),o.set("code",a),b.post("https://api.instagram.com/oauth/access_token",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r({type:"SET_INSTAGRAM_AUTH_DATA",payload:{token:e.access_token,userId:e.user_id}})})).catch((function(e){console.log(e)})).finally((function(){}))}},getInstagramContent:function(e){return function(){var t=Object(y.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get("https://graph.instagram.com/me/media",{params:{fields:"id,caption,media_type,media_url,permalink,thumbnail_url,timestamp,username",access_token:e}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})).finally((function(){}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(T),I=n(16),P=n(18);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={fetchingData:!1,uploadsPlaylistId:null,content:[],nextPageToken:null};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={fetchingData:!1,content:[],next:null};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={authData:{token:null,userId:null}},G=Object(I.c)({youtube:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_YOUTUBE_DATA":return C({},e,{fetchingData:t.payload});case"GET_YOUTUBE_UPLOADS_PLAYLIST_ID":return C({},e,{uploadsPlaylistId:t.payload});case"GET_YOUTUBE_CONTENT":return C({},e,{fetchingData:t.payload.fetchingData,content:e.content.concat(t.payload.data.items),nextPageToken:t.payload.data.nextPageToken});case"PLAY_YOUTUBE_VIDEO":var n=e.content;return n[t.payload].clicked=!0,C({},e,{content:n});default:return e}},vimeo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_VIMEO_DATA":return V({},e,{fetchingData:t.payload});case"GET_VIMEO_CONTENT":return V({},e,{fetchingData:t.payload.fetchingData,content:e.content.concat(t.payload.data.data),next:t.payload.data.paging.next});case"PLAY_VIMEO_VIDEO":var n=e.content;return n[t.payload].clicked=!0,V({},e,{content:n});default:return e}},instagram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INSTAGRAM_AUTH_DATA":return console.log(t.payload),S({},e,{authData:{token:t.payload.token,userId:t.payload.userId}});default:return e}}}),M=n(44),B=Object(I.d)(Object(I.a)(M.a)),H=Object(I.e)(G,void 0,B),z=(n(90),n(45)),F=n(17);i.a.render(r.a.createElement(d.a,{store:H},r.a.createElement(z.a,null,r.a.createElement(F.c,null,r.a.createElement(F.a,{path:"/",render:function(e){return r.a.createElement(k,{qs:e.location.search})}})))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.b2840568.chunk.js.map